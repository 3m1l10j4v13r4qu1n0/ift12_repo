@startuml diagramaGeneral
title Sistema de Lista de Regalos - Vista General de Módulos

left to right direction
skinparam packageStyle rectangle

' ===== ESTILOS VISUALES =====
skinparam package {
    BorderThickness 3
    FontStyle bold
    FontSize 14
}

skinparam actor {
    BackgroundColor White
    BorderColor Black
    BorderThickness 2
}

' ===== ACTORES PRINCIPALES =====
actor "Pareja\n<<abstract>>" as Pareja #LightGray
actor "Novia" as SoyNovia #Pink
actor "Novio" as SoyNovio #LightBlue
actor "Invitado" as Invitado #Wheat
actor "Administrador" as Admin #Orange

' Sistemas externos
actor "Sistema de Pago" as Pago <<external>> #LightCyan
actor "Sistema de Correo" as Mail <<external>> #LightCyan

' Generalización
SoyNovia -up-|> Pareja
SoyNovio -up-|> Pareja

' ===== MÓDULOS DEL SISTEMA =====

package "**M1: Gestión de Usuarios**" as M1 #LightYellow {
  note as N1
    • Registro y autenticación
    • Gestión de perfiles
    • Recuperación de contraseña
    • Validaciones de seguridad
  end note
}

package "**M2: Gestión de Listas**" as M2 #LightBlue {
  note as N2
    • Crear y configurar listas
    • Publicar/despublicar
    • Compartir enlaces
    • Personalización
  end note
}

package "**M3: Gestión de Productos**" as M3 #LightGreen {
  note as N3
    • CRUD de productos
    • Prioridades y cantidades
    • Estado en tiempo real
    • Importación desde catálogo
  end note
}

package "**M4: Búsqueda y Visualización**" as M4 #Lavender {
  note as N4
    • Buscar listas
    • Filtrar productos
    • Ver estado y progreso
    • Detalle de listas
  end note
}

package "**M5: Compra de Regalos**" as M5 #LightCoral {
  note as N5
    • Selección de productos
    • Reservas temporales
    • Procesamiento de pagos
    • Confirmación y comprobantes
  end note
}

package "**M6: Notificaciones**" as M6 #LightPink {
  note as N6
    • Notificaciones de compra
    • Confirmaciones por email
    • Alertas de estado
    • Recordatorios
  end note
}

package "**M7: Administración**" as M7 #LightGray {
  note as N7
    • Gestión de catálogo
    • Administrar usuarios
    • Reportes y estadísticas
    • Configuración del sistema
  end note
}

' ===== RELACIONES ACTORES - MÓDULOS =====

' Pareja
Pareja --> M1 : "usa"
Pareja --> M2 : "gestiona"
Pareja --> M3 : "administra"

' Invitado
Invitado --> M1 : "usa"
Invitado --> M4 : "consulta"
Invitado --> M5 : "compra"

' Administrador
Admin --> M1 : "supervisa"
Admin --> M7 : "administra"

' Sistemas externos
Pago --> M5 : "procesa"
Mail --> M1 : "verifica"
Mail --> M6 : "envía"

' ===== DEPENDENCIAS ENTRE MÓDULOS =====

M2 ..> M1 : <<requiere>>\nautenticación
M3 ..> M2 : <<requiere>>\nlista creada
M4 ..> M3 : <<consulta>>\nestado productos
M5 ..> M4 : <<usa>>\nbúsqueda
M5 ..> M3 : <<actualiza>>\nestado
M6 ..> M5 : <<notifica>>\ncompras
M6 ..> M1 : <<notifica>>\nverificaciones
M7 ..> M1 : <<gestiona>>\nusuarios
M7 ..> M3 : <<gestiona>>\nproductos

' ===== LEYENDA =====
legend bottom
  |= Símbolo |= Significado |
  | <<requiere>> | Dependencia obligatoria |
  | <<usa>> | Utiliza funcionalidad |
  | <<consulta>> | Consulta información |
  | <<actualiza>> | Modifica estado |
  | <<notifica>> | Envía notificaciones |
  | <<gestiona>> | Administra recursos |
  
  **Nota:** Cada módulo tiene su diagrama
  detallado por separado (M1 a M7)
end legend

@enduml