@startuml moduloUsuariosGeneral
left to right direction
skinparam packageStyle rectangle

skinparam usecase {
    BackgroundColor White
    BorderColor Black
    BorderThickness 2
}

skinparam actor {
    BackgroundColor White
    BorderColor Black
    BorderThickness 2
}

skinparam package {
    BorderThickness 2
    FontStyle bold
}

title UC01: Gestión de Usuarios (General)

' ===== ACTORES =====
actor "Pareja\n<<abstract>>" as Pareja #LightGray
actor "Novio" as SoyNovio #LightBlue
actor "Novia" as SoyNovia #Pink
actor "Invitado" as Invitado #Wheat
actor "Administrador" as Admin #Orange
actor "Sistema de\nCorreo" as Mail <<external>> #LightCyan

' Generalización
SoyNovio -up-|> Pareja
SoyNovia -up-|> Pareja

' ===== CASOS DE USO PRINCIPALES =====
package "Gestión de Usuarios" #LightYellow {
  
  usecase (Registrarse en\nel sistema) as UC01
  usecase (Iniciar sesión) as UC02
  usecase (Gestionar perfil) as UC03
  usecase (Recuperar contraseña) as UC04
  usecase (Cerrar sesión) as UC05
  usecase (Registro de Pareja) as MOD1A #MistyRose
  usecase (Registro de Invitado) as MOD1B #Honeydew
  
  
  package "   Validaciones Comunes" #AliceBlue {
    usecase (Validar datos\nde registro) as UC01b
    usecase (Verificar DNI y usuario\nno existentes) as UC01c
    usecase (Encriptar contraseña) as UC01d
    usecase (Enviar correo de\nverificación) as UC01e
  }
}

' ===== RELACIONES DE ACTORES =====

' Actores - Registro
Pareja -up-> MOD1A 
Invitado -up-> MOD1B #76594F

' Actores - Funcionalidades generales
Pareja --> UC02 
Pareja --> UC03 
Pareja --> UC04 
Pareja --> UC05 

Invitado --> UC02 #76594F
Invitado --> UC03 #76594F
Invitado --> UC04 #76594F
Invitado --> UC05 #76594F

Admin --> UC02 #DarkOrange
Admin --> UC05 #DarkOrange

' Sistema externo
Mail --> UC01e #DarkCyan
Mail --> UC04 #DarkCyan

' ===== RELACIONES ENTRE CASOS DE USO =====

' Flujo principal
MOD1A -up-|> UC01 : <<generalizacion>>
MOD1B -up-|> UC01 : <<generalizacion>>
UC01 ..> UC01b : <<include>>
UC01 ..> UC01c : <<include>>
UC01 ..> UC01d : <<include>>
UC01 ..> UC01e : <<include>>
UC01 ..> UC02  : <<extend>>


' Otras relaciones
UC03 ..> UC02 : <<include>>
UC04 ..> UC01e : <<include>>

' ===== NOTAS EXPLICATIVAS =====

note right of MOD1A
  Ver detalle en:
  Registro de Pareja
  
  Incluye proceso de vinculación
  entre Novio y Novia
end note

note right of MOD1B
  Ver detalle en:
  Registro de Invitado
  
  Registro independiente
  sin vinculación
end note

note bottom of UC01b
  **Validaciones incluyen:**
  • Email válido y único
  • Contraseña segura (8+ chars)
  • Campos obligatorios
  • Términos y condiciones
  • Captcha anti-bot
end note

note right of UC02
  Permite el acceso al sistema
  a usuarios registrados
  (Pareja, Invitado, Admin)
end note

@enduml